<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Attendance Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }

    body {
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #667eea, #764ba2);
      transition: 0.4s;
    }

    body.dark {
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    }

    .container {
      width: 380px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 28px 30px;
      box-shadow: 0 25px 60px rgba(0,0,0,0.25);
      position: relative;
      animation: pop 0.6s ease;
    }

    body.dark .container {
      background: rgba(25, 25, 25, 0.95);
      color: #fff;
    }

    @keyframes pop {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    h1 {
      text-align: center;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .subtitle {
      text-align: center;
      font-size: 13px;
      opacity: 0.7;
      margin-bottom: 20px;
    }

    label {
      font-size: 13px;
      margin-top: 12px;
      display: block;
    }

    input {
      width: 100%;
      margin-top: 6px;
      padding: 11px 14px;
      border-radius: 12px;
      border: none;
      outline: none;
      background: #f1f3f6;
      font-size: 14px;
    }

    body.dark input {
      background: #2b2b2b;
      color: #fff;
    }

    .btn {
      width: 100%;
      margin-top: 18px;
      padding: 12px;
      border-radius: 14px;
      border: none;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      transition: 0.3s;
    }

    .btn:hover { transform: translateY(-2px); opacity: 0.95; }

    .btn.secondary {
      background: linear-gradient(135deg, #43cea2, #185a9d);
    }

    .btn.danger {
      background: linear-gradient(135deg, #ff416c, #ff4b2b);
    }

    .progress {
      margin-top: 20px;
      height: 14px;
      background: #e5e7eb;
      border-radius: 10px;
      overflow: hidden;
    }

    .bar {
      height: 100%;
      width: 0;
      transition: 0.5s ease;
    }

    .result {
      margin-top: 18px;
      text-align: center;
      font-size: 14px;
      line-height: 1.6;
    }

    .ok { color: #16a34a; font-weight: 500; }
    .warn { color: #dc2626; font-weight: 500; }

    .toggle {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #00000010;
      padding: 6px 10px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 12px;
    }

    body.dark .toggle { background: #ffffff20; }

    footer {
      text-align: center;
      font-size: 11px;
      margin-top: 18px;
      opacity: 0.6;
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="toggle" onclick="toggleMode()">ðŸŒ™ Dark</div>

    <h1>Attendance</h1>
    <div class="subtitle">Smart Attendance Calculator</div>

    <label>Total Classes</label>
    <input type="number" id="total">

    <label>Attended Classes</label>
    <input type="number" id="attended">

    <label>Required Percentage (%)</label>
    <input type="number" id="criteria" value="75">

    <button class="btn" onclick="calculate()">Calculate</button>
    <button class="btn secondary" onclick="saveData()">Save</button>
    <button class="btn danger" onclick="clearData()">Clear</button>

    <div class="progress"><div class="bar" id="bar"></div></div>
    <div class="result" id="result"></div>

  </div>

  <script>
    const totalInput = document.getElementById('total');
    const attendedInput = document.getElementById('attended');
    const criteriaInput = document.getElementById('criteria');
    const result = document.getElementById('result');
    const bar = document.getElementById('bar');

    function calculate() {
      const total = +totalInput.value;
      const attended = +attendedInput.value;
      const criteria = +criteriaInput.value;

      if (total <= 0 || attended < 0 || attended > total) {
        result.innerHTML = '<span class="warn">Please enter valid values</span>';
        return;
      }

      const percent = ((attended / total) * 100).toFixed(2);
      bar.style.width = percent + '%';
      bar.style.background = percent >= criteria
        ? 'linear-gradient(90deg, #16a34a, #22c55e)'
        : 'linear-gradient(90deg, #dc2626, #f87171)';

      let msg = `<b>${percent}%</b><br>`;

      if (percent >= criteria) {
        const bunk = Math.floor((attended * 100 / criteria) - total);
        msg += `<span class="ok">Safe âœ”<br>You can bunk ${bunk} classes</span>`;
      } else {
        const need = Math.ceil(((criteria / 100) * total) - attended);
        msg += `<span class="warn">Attend next ${need} classes continuously</span>`;
      }

      result.innerHTML = msg;
    }

    function saveData() {
      localStorage.setItem('attendance', JSON.stringify({
        total: totalInput.value,
        attended: attendedInput.value,
        criteria: criteriaInput.value
      }));
      alert('Saved successfully');
    }

    function clearData() {
      localStorage.removeItem('attendance');
      location.reload();
    }

    function toggleMode() {
      document.body.classList.toggle('dark');
    }

    window.onload = () => {
      const data = JSON.parse(localStorage.getItem('attendance'));
      if (data) {
        totalInput.value = data.total;
        attendedInput.value = data.attended;
        criteriaInput.value = data.criteria;
        calculate();
      }
    }
  </script>
</body>
</html>
